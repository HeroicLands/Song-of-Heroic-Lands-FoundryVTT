{{!--
This file is part of the Song of Heroic Lands (SoHL) system for Foundry VTT.
Copyright (c) 2024â€“2026 Tom Rodriguez ("Toasty") <toasty@heroiclands.com>

Licensed under the GNU General Public License v3.0 (GPLv3).
You may copy, modify, and distribute this file under the terms of that license.

See LICENSE.md in the project root or:
https://www.gnu.org/licenses/gpl-3.0.html

SPDX-License-Identifier: GPL-3.0-or-later
--}}

<form class="{{cssClass}} flexcol" spellcheck="false" autocomplete="off">
    <header class="sheet-header">
        <img src="{{data.img}}" data-edit="img" title="{{data.name}}" height="64" width="64" />
        <h1><input name="name" type="text" value="{{data.name}}"  placeholder="Name" /></h1>
    </header>

    <div class="grid grid-3col">
        <div class="form-group stacked">
            <label>{{ localize "Scope" }}</label>
            <select name="scope" disabled>
                {{selectOptions macroScopes selected=data.scope}}
            </select>
        </div>
    
        <div class="form-group stacked">
            <label>{{ localize "Type" }}</label>
            <select name="type">
                {{selectOptions macroTypes selected=data.type}}
            </select>
        </div>

        {{#if isAction}}
        {{#unless flags.sohl.isIntrinsicAction}}
        <div class="form-group">
            <input type="checkbox" name="flags.sohl.useAsync" {{checked data.useAsync}} data-dtype="Boolean" />
            <label>Async</label>
        </div>
        {{/unless}}

        {{#if flags.sohl.isIntrinsicAction}}
        <div class="form-group stacked">
            <label data-tooltip="Name of Action to call on parent">Action Name</label>
            {{textInput data.functionName name="flags.sohl.functionName"}}
        </div>
        {{/if}}

        <div class="form-group stacked">
            <label data-tooltip="Font Awesome Icon CSS Class (e.g., &ldquo;fa-solid fa-stars&rdquo;)">FA Icon</label>
            {{textInput flags.sohl.contextIconClass name="flags.sohl.contextIconClass"}}
        </div>

        <div class="form-group stacked">
            <label>Group</label>
            <select name="flags.sohl.contextGroup">
                {{selectOptions config.Helper.contextMenu.sortGroups selected=flags.sohl.contextGroup}}
            </select>
        </div>
        {{/if}}
    </div>

    <div class="form-group">
        <label>Notes</label>
        <input class="notes" name="flags.sohl.notes" type="text" value="{{flags.sohl.notes}}" data-dtype="String" />
    </div>

    {{#if isAction}}
    <div class="form-group stacked condition">
        <label>Condition Function</label>
        <textarea name="flags.sohl.contextCondition">{{flags.sohl.contextCondition}}</textarea>
    </div>
    {{/if}}

    {{#unless (and isAction flags.sohl.isIntrinsicAction)}}
    <div class="form-group stacked command">
        <label>Command</label>
        <textarea name="command">{{data.command}}</textarea>
    </div>
    {{/unless}}


    <footer class="sheet-footer flexrow">
        <button type="submit"><i class="fas fa-save"></i> Save</button>
        <button class="execute" type="button"><i class="fas fa-gears"></i> Execute</button>
    </footer>
</form>
